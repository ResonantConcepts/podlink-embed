<!-- <a href="https://pod.link/1460319105">Listen & Subscribe to Primetime</a>
<a href="https://pod.link/1418948779">Listen & Subscribe to The Substack Podcast</a> -->

<a href="http://localhost:3000/1460319105" target="_blank" style="display:inline-block;padding:8px;background: #fff;color:#3d65f5;border:1px solid #dbdbdb;border-radius:8px;font: 700 14px sans-serif;text-decoration:none;">Listen & Subscribe to Primetime</a>
<a href="http://localhost:3000/1418948779" target="_blank" style="display:inline-block;padding:8px;background: #fff;color:#3d65f5;border:1px solid #dbdbdb;border-radius:8px;font: 700 14px sans-serif;text-decoration:none;">Listen & Subscribe to The Substack Podcast</a>


<dialog id="podlink-modal">
    <div id="podlink-modal-header">
        <h2>Listen In…</h2>
        <button id="podlink-modal-close" type="button">Close</button>
    </div>
    <div id="podlink-modal-body">
        <iframe id="podlink-modal-iframe" src="" frameborder="none"></iframe>
    </div>
</dialog>

<script src='https://cdnjs.cloudflare.com/ajax/libs/dialog-polyfill/0.4.9/dialog-polyfill.min.js'></script>
<script id="rendered-js">
    const modal = document.getElementById('podlink-modal');
    const open = document.getElementById('open-modal');
    const iframe = document.getElementById('podlink-modal-iframe');
    const close = document.getElementById('podlink-modal-close');

    dialogPolyfill.registerDialog(modal);

    // let podlinks = document.querySelectorAll('a[href^="https://pod.link"]');
    let podlinks = document.querySelectorAll('a[href^="http://localhost:3000/"]');
    podlinks.forEach(function (elem) {
        elem.addEventListener('click', () => {
            iframe.src = elem.getAttribute("href") + '/modal';
            event.preventDefault();
            modal.showModal();
        });
    });

    close.addEventListener('click', () => {
        modal.close('cancelled');
    });

    modal.addEventListener('cancel', () => {
        modal.close('cancelled');
    });

    // close when clicking on backdrop
    modal.addEventListener('click', event => {
        if (event.target === modal) {
            modal.close('cancelled');
        }
    });
</script>

<style>
    #podlink-modal {
        padding: 0;
        border: 0;
        background-color: #f7f7f7;
        border: 1px solid #dbdbdb;
        border-radius: 2px;
    }

    /* native backdrop */
    #podlink-modal::backdrop {
        background-color: hsla(0, 0%, 6%, .6);
    }

    /* polyfill backdrop */
    #podlink-modal+.backdrop {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background-color: hsla(0, 0%, 6%, .6);
    }

    #podlink-modal[open] {
        animation: slide-up 0.4s ease-out;
    }

    /* The following styles are for older browsers when using
       the polyfill. These aren’t necessary for Chrome/Firefox. */
    #podlink-modal {
        display: none;
        position: absolute;
        margin: 0 auto;
        /* should center it, but not working in Safari */
        max-width: 80vw;
        background-color: white;
    }

    #podlink-modal[open] {
        display: block;
    }

    
    #podlink-modal-header {
        margin: 0;
        padding: 1em;
        border-bottom: 1px solid hsla(0,0%,6%,.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    #podlink-modal-header h2 {
        font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif;
        margin: 0;
        font-size: 1.5rem;
    }

    #podlink-modal-close {
        padding: 0;
        line-height: 1;
        background-color: transparent;
        border: 0;
        text-transform: uppercase;
    }

    #podlink-modal-body {
        position: relative;
        height: 500px;
        max-height: 80vh;
        width: 576px;
        max-width: 100%;
    }

    @media screen and (min-width:30rem) {
        #podlink-modal-body {
            height: 300px;
        }
    }

    @media screen and (min-width:36rem) {
        #podlink-modal-body {
            height: 220px;
        }
    }

    #podlink-modal-iframe {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    @keyframes slide-up {
        0% {
            opacity: 0;
            transform: translate(0, 15px);
        }

        100% {
            opacity: 1;
            transform: translate(0, 0);
        }
    }
</style>